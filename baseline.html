
<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="description" content="EE 230, Electronics" />

		
		<title>EE 230 :  Topics</title>		

		 <div id='d1' style="position:absolute; top:500px; left:1000px; z-index:1; border-width:1px">  
			  	<canvas id="nonCanvas" width="300" height="100" style="position:absolute top:500px left:600px border:1px solid #d3d3d3;">
		Your browser does not support the HTML5 canvas tag.</canvas>
		</div>
	</head>

	<script src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.3.3/d3.min.js" type="text/javascript"></script>

	<script Language = "JavaScript">
	function noninverting(obj) {

		Ra = parseFloat(obj.Ra.value)
		Rb = parseFloat(obj.Rb.value)
		VREF = parseFloat(obj.VREF.value)
		VLP = parseFloat(obj.VLP.value)
		VLM = parseFloat(obj.VLM.value)

		VTL = VREF * (1 + Ra / Rb) - Ra / Rb * VLP
		VTH = VREF * (1 + Ra / Rb) - Ra / Rb * VLM
		hyst = VTH - VTL

		obj.VTL.value = VTL
		obj.VTH.value = VTH
		obj.hyst.value = hyst



		var coordinates = 
			[{ "x1": VTL-1, "x2": VTL-1, "y": VLM},
			{ "x1": VTL, "x2": VTH, "y": VLM},
			{ "x1": VTL, "x2": VTH, "y": VLP},
			{ "x1": VTH+1, "x2": VTH+1, "y": VLP}]

		var data = coordinates.slice()
		var x1Data = function(d) {return d.x1}
		var x2Data = function(d) {return d.x2}
		var yData = function(d) {return d.y}



		var x = d3.scale.linear()
			.range([VTL-1, VTH+1])
		    .domain([VTL-1, VTH+1])

		//Odd D3 "intended feature" means y range is defined biggest to smallest
		//while y domain is smallest to largest 
		var y = d3.scale.linear()
		    .range([VLP, VLM])
		    .domain([VLM, VLP])

		var svg = d3.select("body").append("svg")
			.attr("width", 500)
			.attr("height", 400)

		svg.selectAll("path").data(data).enter()
			.append("path")
			.attr("x", function(d) {return x(x1Data(d))})
			.attr("y", function(d) {return y(yData(d))})
			.attr("fill", "none")
            .attr("stroke", "blue")
            .attr("stroke-width", 3);
	}

	function inverting(obj) {

	Ra = parseFloat(obj.Ra.value)
	Rb = parseFloat(obj.Rb.value)
	VREF = parseFloat(obj.VREF.value)
	VLP = parseFloat(obj.VLP.value)
	VLM = parseFloat(obj.VLM.value)

	VTL = (VREF + Ra / Rb * VLM) / (1 + Ra / Rb)
	VTH = (VREF + Ra / Rb * VLP) / (1 + Ra / Rb)
	hyst = VTH - VTL

	obj.VTL.value = VTL
	obj.VTH.value = VTH
	obj.hyst.value = hyst

	}
	</script>
	
	<body>



			<h2>Comparator Calculators</h2>	

			<h3>Non-Inverting</h3>

			<img src= "noninverting.png">

			<form name="noninv">
				<table border="0">
					<tr>
						<td>Ra: </td>
						<td><input type=text size = "7" name="Ra">k&#8486</td>
						<td>VTL: </td>
						<td><input type=text size = "7" name="VTL">V</td>
					</tr><tr>
						<td>Rb: </td>
						<td><input type=text size = "7" name="Rb">k&#8486<br></td>
						<td>VTH: </td>
						<td><input type=text size = "7" name="VTH">V</td>
					</tr><tr>
						<td>VREF: </td>
						<td><input type=text size = "7" name="VREF">V</td>
						<td>Hysteresis: </td>
						<td><input type=text size = "7" name="hyst">V</td>
					</tr><tr>
						<td>VL+: </td>
						<td><input type=text size = "7" name="VLP">V</td>
					</tr><tr>
						<td>VL-: </td>
						<td><input type=text size = "7" name="VLM">V</td>
					</tr>
				</table>
			<br><input type="button" value="Calculate" onClick="noninverting(this.form)"><br><br>
			</form>

			<h3>Inverting</h3>

			<img src= "inverting.png">

			<form name="inv">
				<table border="0">
					<tr>
						<td>Ra: </td>
						<td><input type=text size = "7" name="Ra">k&#8486</td>
						<td>VTL: </td>
						<td><input type=text size = "7" name="VTL">V</td>
					</tr><tr>
						<td>Rb: </td>
						<td><input type=text size = "7" name="Rb">k&#8486<br></td>
						<td>VTH: </td>
						<td><input type=text size = "7" name="VTH">V</td>
					</tr><tr>
						<td>VREF: </td>
						<td><input type=text size = "7" name="VREF">V</td>
						<td>Hysteresis: </td>
						<td><input type=text size = "7" name="hyst">V</td>
					</tr><tr>
						<td>VL+: </td>
						<td><input type=text size = "7" name="VLP">V</td>
					</tr><tr>
						<td>VL-: </td>
						<td><input type=text size = "7" name="VLM">V</td>
					</tr>
				</table>
			<br><input type="button" value="Calculate" onClick="inverting(this.form)">
			</form>		

		
											



 
		
	</body>
</html>
